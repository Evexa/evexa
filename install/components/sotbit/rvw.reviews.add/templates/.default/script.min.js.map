{"version":3,"file":"script.min.js","names":["SA_ReviewsAdd","init","params","this","mainModal","document","getElementById","form","querySelector","btnSubmit","ratingNumber","ratingButtons","querySelectorAll","ratingDescriptions","ratingInput","hiddenInputs","fileUploadUrl","imagesFolder","canAddReview","canAddReviewError","isAuthUser","isAnonymous","isBuyProduct","canRepeat","modRepeat","countRepeat","isTimeRepeat","isModerate","configFile","JSON","parse","signedParameters","counterImage","counterVideo","initModals","dropzoneInit","addEventListener","sendReview","bind","BX","onCustomEvent","getParams","param","URL","location","searchParams","result","pair","entries","async","event","button","target","closest","dataset","modal","classList","add","value","showModalResult","message","window","SimpleBar","loadExt","Sotbit","Reviews","showElement","fixBodyScroll","id","innerHTML","remove","setAttribute","overlay","showOverlay","anonymousCheckbox","anonymousHiddenField","checked","element","hideElement","callback","unfixBodyScroll","hide","deleteFormField","once","closeButton","setRatingValue","showRating","initStarRatingEvents","forEach","rating","ratingStarFilled","style","opacity","counterFile","type","typeFile","checkMimeType","counterFileMinus","mime","isImage","isVideo","arrayOfStrings","split","strings","trim","match","bytesToSize","bytes","precision","Math","floor","log","REVIEWS_UPLOAD_FILE","countFile","size","acceptedFiles","Number","REVIEWS_MAX_COUNT_IMAGES","REVIEWS_MAX_IMAGE_SIZE","REVIEWS_MAX_COUNT_VIDEO","REVIEWS_MAX_VIDEO_SIZE","dropzone","Dropzone","previewTemplate","url","parallelUploads","maxFiles","maxFilesize","paramName","dictDefaultMessage","dictRemoveFile","addRemoveLinks","dictMaxFilesExceeded","dictCancelUpload","dictUploadCanceled","dictFileTooBig","dictInvalidFileType","thumbnailWidth","thumbnailHeight","on","showMessage","icon","previewsContainer","prepend","create","props","className","html","file","hiddenElement","viewedElement","createVideoThumbnail","edit","previewElement","Error","contains","localName","i","options","files","length","appendChild","response","error","attrs","name","ajax","post","action","fileId","e","imageContainer","console","warn","img","video","createElement","source","src","createObjectURL","append","replaceChild","elem","preventDefault","reportValidity","FormData","active","SA_ReviewsList","editReviewsController","runComponentAction","mode","data","then","hideOverlay","get","errors","map","item","join","setTimeout","SA_Reviews","reloadList","reset","idNode","title","status","text","btns","modalResult","body","closeModalResult","elementComplaintController"],"sources":["rvw.reviews.add/templates/.default/script.js"],"mappings":"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","ignoreList":[],"sourcesContent":["(function () {\n    SA_ReviewsAdd = {\n        init: function (params) {\n            this.mainModal = document.getElementById('review_add__modal');\n            this.form = this.mainModal.querySelector('form');\n\n            if (!this.form) {\n                return;\n            }\n\n            this.btnSubmit = this.mainModal.querySelector('button[type=\"submit\"]');\n\n            this.ratingNumber = params.ratingNumber;\n            this.ratingButtons = this.form.querySelectorAll('button[data-rating]');\n            this.ratingDescriptions = this.form.querySelectorAll('.rating_description span[data-rating]');\n            this.ratingInput = this.form.querySelector('input[name=\"RATING\"]');\n            this.hiddenInputs = [];\n            this.fileUploadUrl = params.fileUploadUrl;\n            this.imagesFolder = params.imagesFolder;\n            this.canAddReview = params.canAddReview;\n            this.canAddReviewError = params.canAddReviewError;\n            this.isAuthUser = params.isAuthUser;\n            this.isAnonymous = params.isAnonymous;\n            this.isBuyProduct = params.isBuyProduct;\n\n            this.canRepeat = !!params.canRepeat;\n            this.modRepeat = params.modRepeat ? params.modRepeat : -1;\n            this.countRepeat = params.countRepeat ? params.countRepeat:0;\n\n            this.isTimeRepeat = params.isTimeRepeat == 'Y';\n            this.isModerate = params.isModerate == 'Y';\n            this.configFile = JSON.parse(params.configFile);\n            this.signedParameters = params.signedParameters;\n            this.counterImage = 0;\n            this.counterVideo = 0;\n            this.initModals();\n            this.dropzoneInit();\n            this.btnSubmit.addEventListener('click', this.sendReview.bind(this));\n            this.form.addEventListener('submit', this.sendReview.bind(this));\n            BX.onCustomEvent('sotbit:reviews.reviewsAddInit', [this]);\n        },\n\n        getParams: function (param){\n            let params = (new URL(document.location)).searchParams;\n            let result = {};\n\n            for (var pair of params.entries()) {\n                result[pair[0]] =  pair[1];\n            }\n\n            return result;\n        },\n\n        initModals: function () {\n            document.addEventListener('click', async (event) => {\n                const button = event.target.closest('[data-action=\"show-modal\"]');\n\n                if (button) {\n                const target = button.dataset.target;\n\n                if (!target) {\n                    return;\n                }\n\n                const modal = document.getElementById(target);\n\n                if (!modal) {\n                    return;\n                }\n\n                    modal.querySelector('.content__reviews__item__body--quote').classList.add('display-none-important');\n                    modal.querySelector('input[name=\"ID_QUOTE\"]').value = '';\n\n                    if (this.canAddReview === false) {\n                        this.showModalResult(this.canAddReviewError, 'error');\n                        return;\n                    }\n\n                    if (this.canRepeat === false ) {\n                        this.showModalResult(BX.message('repeat_message'), 'error');\n                        return;\n                    }\n\n                    !window.SimpleBar && await BX.loadExt('sotbit.b2c.simplebar');\n\n                    BX.Sotbit.Reviews.showElement(modal);\n                    BX.Sotbit.Reviews.fixBodyScroll();\n\n                    if (button.dataset.id) {\n                        modal.querySelector('.review_add__title').innerHTML = BX.message('title_quite');\n                        modal.querySelector('.content__reviews__item__body--quote').classList.remove('display-none-important');\n                        modal.querySelector('input[name=\"ID_QUOTE\"]').value = button.closest('.reviews__content').querySelector('.content__reviews__item__body p').innerHTML;\n                        modal.querySelector('.reviews--quote p').innerHTML = button.closest('.reviews__content').querySelector('.content__reviews__item__body p').innerHTML;\n                        modal.querySelector('.reviews--quote p').setAttribute('title', modal.querySelector('.reviews--quote p').innerHTML);\n                    }else{\n                        modal.querySelector('.review_add__title').innerHTML = BX.message('title_origin');\n                    }\n\n                    if (button.dataset.target !== 'policy_modal') {\n                        if (!this.overlay) {\n                            this.overlay = BX.Sotbit.Reviews.showOverlay();\n                    }\n                        BX.Sotbit.Reviews.fixBodyScroll();\n                        }\n\n                const anonymousCheckbox = modal.querySelector('#review_add__modal input[type=\"checkbox\"]');\n                const anonymousHiddenField = this.form.querySelector('input[name=\"ANONYMOUS\"]');\n\n                    if (this.isAnonymous === 'Y' && anonymousCheckbox) {\n                    anonymousCheckbox.addEventListener('change', () => {\n                        anonymousHiddenField.value = anonymousCheckbox.checked ? 'Y' : 'N';\n                    });\n                }\n\n                    this.overlay.element.addEventListener('click', () => {\n                        BX.Sotbit.Reviews.hideElement(modal, {\n                            callback: () => {\n                                if (modal === this.mainModal) {\n                                    BX.Sotbit.Reviews.unfixBodyScroll();\n                                }\n                            }\n                        });\n                        this.overlay?.hide();\n                        this.overlay = null;\n                        this.deleteFormField(modal);\n                    }, { once: true });\n                }\n\n                const closeButton = event.target.closest('[data-action=\"close-modal\"]');\n\n                if (closeButton) {\n                    const modal = closeButton.closest('#review_add__modal');\n\n                    if (modal) {\n                        BX.Sotbit.Reviews.hideElement(modal, {\n                            callback: () => {\n                                this.overlay?.hide();\n                                this.overlay = null;\n                                BX.Sotbit.Reviews.unfixBodyScroll();\n\n                        this.deleteFormField(modal);\n                    }\n                });\n                    }\n                }\n            });\n\n            this.setRatingValue(this.ratingNumber);\n            this.showRating(this.ratingNumber);\n            this.initStarRatingEvents();\n        },\n\n        initStarRatingEvents: function () {\n            this.ratingButtons.forEach(button => button.addEventListener('click', () => {\n                const rating = button.dataset.rating;\n                this.setRatingValue(rating);\n\n                this.showRating(rating);\n            }));\n\n            this.ratingButtons.forEach(button => button.addEventListener('mouseover', () => {\n                this.showRating(button.dataset.rating);\n            }));\n\n            this.ratingButtons.forEach(button => button.addEventListener('mouseout', () => {\n                this.showRating(this.ratingInput.value);\n            }));\n        },\n\n        setRatingValue: function (rating) {\n            this.ratingInput.value = rating;\n        },\n\n        showRating: function (rating) {\n            this.ratingButtons.forEach(button => {\n                const ratingStarFilled = button.querySelector('.review_add__star-icon--filled');\n\n                if (button.dataset.rating > rating) {\n                    ratingStarFilled.style.opacity = 0;\n                } else {\n                    ratingStarFilled.style.opacity = 1;\n                }\n            });\n        },\n\n        counterFile: function (type) {\n           let typeFile =  this.checkMimeType(type);\n            if(typeFile == 'image'){\n                ++this.counterImage;\n            }if(typeFile == 'video'){\n                ++this.counterVideo;\n            }\n            return typeFile;\n        },\n\n        counterFileMinus: function (type) {\n            let typeFile =  this.checkMimeType(type);\n            if(typeFile == 'image'){\n                --this.counterImage;\n            }if(typeFile == 'video'){\n                --this.counterVideo;\n            }\n            return typeFile;\n        },\n\n        checkMimeType: function (mime){\n\n            if(this.isImage(mime)){\n                return 'image';\n            }\n\n            if (this.isVideo(mime)){\n                return 'video';\n            }\n\n            return 'error';\n        },\n\n        isImage: function (mime){\n            arrayOfStrings = mime.split(';');\n            strings = arrayOfStrings[0].trim();\n            let result = strings.match('^image');\n            return result;\n        },\n\n        isVideo: function (mime){\n            arrayOfStrings = mime.split(';');\n            strings = arrayOfStrings[0].trim();\n            let result = strings.match('^video');\n            return result;\n        },\n\n        bytesToSize: function (bytes, precision = 0) {\n            if (bytes === 0) return '0';\n\n            const index = Math.floor(Math.log(bytes) / Math.log(1024));\n\n            return index;\n        },\n\n        dropzoneInit: function () {\n\n            if(this.configFile.REVIEWS_UPLOAD_FILE == 'NO' || !this.configFile.REVIEWS_UPLOAD_FILE){\n                return;\n            }\n\n            let countFile = 0;\n            let size = 0;\n            let acceptedFiles = '.jpg, .gif, .bmp, .png, .jpeg, .webp, .mp4, .webm';\n\n            if(this.configFile.REVIEWS_UPLOAD_FILE == 'IMAGE'){\n                acceptedFiles = '.jpg, .gif, .bmp, .png, .jpeg, .webp';\n                countFile = Number(this.configFile.REVIEWS_MAX_COUNT_IMAGES);\n                size = Number(this.configFile.REVIEWS_MAX_IMAGE_SIZE);\n            }\n\n            if(this.configFile.REVIEWS_UPLOAD_FILE == 'IMAGE_VIDEO'){\n                acceptedFiles = '.jpg, .gif, .bmp, .png, .jpeg, .webp, .mp4, .webm';\n                countFile = (Number(this.configFile.REVIEWS_MAX_COUNT_VIDEO) + Number(this.configFile.REVIEWS_MAX_COUNT_IMAGES));\n                size = Number(this.configFile.REVIEWS_MAX_VIDEO_SIZE);\n            }\n            if(!this.mainModal.querySelector('#dropzone_media')){\n                return;\n            }\n            this.dropzone = new Dropzone(this.mainModal.querySelector('#dropzone_media'), {\n                previewTemplate: '<div class=\"dz-file-preview dz-preview\"> <div class=\"dz-image\"><img data-dz-thumbnail=\"\"></div> <div class=\"dz-details\"><div class=\"dz-filename\"><span data-dz-name=\"\"></span></div> </div> <div class=\"dz-progress\"> <span class=\"dz-upload\" data-dz-uploadprogress=\"\"></span> </div> <div class=\"dz-error-message\"><span data-dz-errormessage=\"\"></span></div> <div class=\"dz-success-mark\"> <svg width=\"54\" height=\"54\" fill=\"#fff\"><path d=\"m10.207 29.793 4.086-4.086a1 1 0 0 1 1.414 0l5.586 5.586a1 1 0 0 0 1.414 0l15.586-15.586a1 1 0 0 1 1.414 0l4.086 4.086a1 1 0 0 1 0 1.414L22.707 42.293a1 1 0 0 1-1.414 0L10.207 31.207a1 1 0 0 1 0-1.414Z\"/></svg> </div> <div class=\"dz-error-mark\"> <svg width=\"54\" height=\"54\" fill=\"#fff\"><path d=\"m26.293 20.293-7.086-7.086a1 1 0 0 0-1.414 0l-4.586 4.586a1 1 0 0 0 0 1.414l7.086 7.086a1 1 0 0 1 0 1.414l-7.086 7.086a1 1 0 0 0 0 1.414l4.586 4.586a1 1 0 0 0 1.414 0l7.086-7.086a1 1 0 0 1 1.414 0l7.086 7.086a1 1 0 0 0 1.414 0l4.586-4.586a1 1 0 0 0 0-1.414l-7.086-7.086a1 1 0 0 1 0-1.414l7.086-7.086a1 1 0 0 0 0-1.414l-4.586-4.586a1 1 0 0 0-1.414 0l-7.086 7.086a1 1 0 0 1-1.414 0Z\"/></svg> </div> </div>',\n                url: this.fileUploadUrl,\n                parallelUploads: 100,\n                maxFiles: 100,\n                maxFilesize: size,\n                paramName: 'FILES_MEDIA',\n                acceptedFiles: acceptedFiles,\n                dictDefaultMessage: BX.message('dropzone_message'),\n                dictRemoveFile: BX.message('dropzone_delete'),\n                addRemoveLinks: true,\n                dictMaxFilesExceeded: BX.message('dropzone_error_max_files'),\n                dictCancelUpload: BX.message('dropzone_delete'),\n                dictUploadCanceled: BX.message('dropzone_cancel'),\n                dictFileTooBig: BX.message('dropzone_file_too_big'),\n                dictInvalidFileType: BX.message('error_file_type'),\n                thumbnailWidth: 90,\n                thumbnailHeight: 90\n            });\n\n            this.dropzone.on(\"maxfilesexceeded\", () => {\n                return BX.Sotbit.Reviews.showMessage(BX.message('dropzone_error_max_files'), {icon: 'error'});\n            });\n\n            this.dropzone.previewsContainer.prepend(BX.create('button', {\n                props: {\n                    className: 'dz-placeholder',\n                    type: 'button'\n                },\n                html: `\n                        <svg viewBox=\"0 0 24 24\" width=\"24\">\n                            <use xlink:href=\"${this.imagesFolder}/camera.svg#icon\"></use>\n                        </svg>\n                    `\n            }));\n\n            this.dropzone.on(\"addedfile\", (file)  => {\n                let type =  this.checkMimeType(file.type);\n\n                this.hiddenElement(this.dropzone.previewsContainer.querySelector('.dz-default.dz-message'));\n                this.viewedElement(this.dropzone.previewsContainer.querySelector('button.dz-placeholder'));\n\n                if (type === 'video') {\n                    this.createVideoThumbnail(file);\n                }\n\n               if( type == 'image' && this.configFile.REVIEWS_MAX_IMAGE_SIZE < this.bytesToSize(file.size)){\n                   if(!file.edit){\n                       file.previewElement.querySelector(\"[data-dz-errormessage]\").innerHTML = BX.message('error_image_size');\n                       file.previewElement.classList.add('dz-error');\n                       throw new Error(BX.message('error_image_size'));\n                   }\n               }else{\n                   if(file.previewElement.classList.contains('dz-error')){\n                       file.previewElement.classList.remove('dz-error');\n                   }\n               }\n\n                if( type == 'video' && this.configFile.REVIEWS_MAX_COUNT_VIDEO < this.bytesToSize(file.size)){\n                    if(!file.edit) {\n                        file.previewElement.querySelector(\"[data-dz-errormessage]\").innerHTML = BX.message('error_video_size');\n                        file.previewElement.classList.add('dz-error');\n                        throw new Error(BX.message('error_video_size'));\n                    }\n                }else{\n                    if(file.previewElement.classList.contains('dz-error')){\n                        file.previewElement.classList.remove('dz-error');\n                    }\n                }\n\n                this.counterFile(file.type);\n\n                if(this.configFile.REVIEWS_MAX_COUNT_VIDEO < this.counterVideo && type=='video'){\n                     file.previewElement.querySelector(\"[data-dz-errormessage]\").innerHTML = BX.message('error_video');\n                     file.previewElement.classList.add('dz-error');\n                     throw new Error(BX.message('error_video'));\n                }\n                if(this.configFile.REVIEWS_MAX_COUNT_IMAGES < this.counterImage && type=='image'){\n                    file.previewElement.querySelector(\"[data-dz-errormessage]\").innerHTML = BX.message('error_image');\n                    file.previewElement.classList.add('dz-error');\n                    throw new Error(BX.message('error_image'));\n                }\n\n                this.dropzone.previewsContainer.querySelectorAll('.dz-placeholder').forEach(element => {\n                    if (element.localName != 'button') {\n                        element.remove()\n                    }\n                });\n\n                for (let i = 0; i < this.dropzone.options.maxFiles - this.dropzone.files.length; i++) {\n                    this.dropzone.previewsContainer.appendChild(BX.create('div', {\n                        props: {\n                            className: 'dz-placeholder'\n                        }\n                    }));\n                }\n            });\n\n            this.dropzone.on(\"success\", (file, response) => {\n                const result = JSON.parse(response);\n\n                if(result.error){\n                    file.previewElement.querySelector(\"[data-dz-errormessage]\").innerHTML = result.error.message;\n                    file.previewElement.classList.add('dz-error');\n                }\n\n                if(result.file.id){\n                    file.id = result.file.id;\n                    this.form.appendChild(\n                        this.hiddenInputs[result.file.id] = BX.create('input', {\n                            attrs: {\n                                'type': 'hidden',\n                                'name': 'MEDIA[]',\n                                'value': result.file.id\n                            }\n                        })\n                    );\n                }\n            });\n\n            this.dropzone.on(\"removedfile\", file => {\n\n                this.counterFileMinus(file.type);\n                BX.remove(this.hiddenInputs[file.id]);\n\n                BX.ajax.post(\n                    this.fileUploadUrl,\n                    {\n                        action: 'removedfile',\n                        fileId: file.id\n                    }\n                );\n\n                if (!this.dropzone.files.length && !this.dropzone.previewsContainer.querySelector('.dz-image-preview')) {\n                    this.dropzone.previewsContainer.querySelectorAll('.dz-placeholder').forEach((e) => {\n                        if(e.classList.contains('d-block')){\n                            this.hiddenElement(e)\n                        }else{\n                            e.remove();\n                        }\n                    });\n\n                    this.viewedElement(this.dropzone.previewsContainer.querySelector('.dz-default.dz-message'))\n\n                }\n            });\n        },\n\n        createVideoThumbnail: function (file) {\n            const imageContainer = file.previewElement.querySelector('.dz-image');\n            if (!imageContainer) {\n                console.warn('imageContainer not found!');\n                return;\n            }\n\n            const img = file.previewElement.querySelector('img[data-dz-thumbnail]');\n            if (!img) {\n                console.warn('img not found!');\n                return;\n            }\n\n            const video = document.createElement('video');\n            video.setAttribute('data-dz-thumbnail', '');\n\n            const source = document.createElement('source');\n            source.src = URL.createObjectURL(file)\n            source.type = file.type;\n\n            video.append(source);\n\n            imageContainer.replaceChild(video, img);\n        },\n\n        hiddenElement: function (elem) {\n            if(elem){\n                if(elem.classList.contains('d-block')){\n                    elem.classList.remove('d-block')\n                }\n                elem.classList.add('display-none-important');\n            }\n        },\n\n        viewedElement: function (elem) {\n            if(elem){\n                if(elem.classList.contains('display-none-important')){\n                    elem.classList.remove('display-none-important')\n                }\n                elem.classList.add('d-block');\n            }\n        },\n\n        sendReview: function (event) {\n            event.preventDefault();\n\n            if (!this.form.reportValidity()) {\n                return;\n            }\n\n            let form = new FormData(this.form);\n\n            if (this.form.dataset.active == 'edit') {\n                SA_ReviewsList.editReviewsController(this.form)\n            }\n\n            if (this.form.dataset.active == 'add') {\n                BX.ajax.runComponentAction('sotbit:rvw.reviews.add', 'addReviews', {\n                    mode: 'class',\n                    data: new FormData(this.form),\n                    signedParameters: this.signedParameters,\n                }).then (\n                     (e) => {\n\n                        BX.Sotbit.Reviews.hideElement(this.mainModal, {\n                            callback: () => {\n                                BX.Sotbit.Reviews.hideOverlay();\n                            }\n                        });\n                        BX.Sotbit.Reviews.unfixBodyScroll();\n\n                         if (this.isModerate) {\n                             if(form.get('ID_QUOTE')){\n                                 this.showModalResult(BX.message('success_title_quote_moderate'), 'success', BX.message('success_quote_text'));\n                             }else{\n                                 this.showModalResult(BX.message('success_title_moderate'), 'success', BX.message('success_moderate_text'));\n                             }\n                         } else {\n                             if(form.get('ID_QUOTE')){\n                                 this.showModalResult(BX.message('success_title_quote'), 'success');\n                             }else{\n                                 this.showModalResult(BX.message('success_title'), 'success');\n                             }\n                         }\n\n                         if(this.modRepeat >= 0){\n                             this.canRepeat = false;\n                         }\n                         this.deleteFormField();\n                    },\n                    (error) => {\n                        console.log(error)\n                        this.showModalResult(error.errors.map(item => item.message).join('\\n'), 'error')\n                    }\n                );\n\n                setTimeout(() => {\n                    SA_Reviews.reloadList(this.getParams());\n                }, \"300\");\n            }\n        },\n\n        deleteFormField: function (modal) {\n\n\n            this.form.querySelector('input[name=\"ID_QUOTE\"]').value = '';\n\n            if(!modal){\n                modal = document.querySelector('#review_add__modal');\n            }\n\n            modal.querySelector('.review_add__title').innerHTML = BX.message('title_origin');\n            modal.querySelector('.content__reviews__item__body--quote').classList.add('display-none-important');\n\n            this.form.reset();\n            this.form.dataset.active = 'add';\n            this.mainModal.querySelectorAll('input[name=\"MEDIA[]\"]').forEach((e) => e.remove());\n            this.counterImage = 0;\n            this.counterVideo = 0;\n\n            if(this.dropzone){\n                this.dropzone.previewsContainer.querySelectorAll('.dz-preview').forEach((e) => e.remove());\n                this.dropzone.countFile = this.counterImage;\n                this.hiddenElement(this.dropzone?.previewsContainer.querySelector('button.dz-placeholder'));\n                this.viewedElement(this.dropzone?.previewsContainer.querySelector('.dz-default.dz-message'));\n            }\n\n            if (modal.querySelectorAll('.dz-preview.dz-complete.dz-image-preview'))\n                modal.querySelectorAll('.dz-preview.dz-complete.dz-image-preview').forEach((e) => e.remove());\n\n            if (modal.querySelectorAll('.dz-file-preview.dz-preview.dz-error'))\n                modal.querySelectorAll('.dz-file-preview.dz-preview.dz-error').forEach((e) => e.remove());\n\n            this.counterImage = 0;\n            this.counterVideo = 0;\n\n            idNode = modal.querySelector('input[name=\"ID\"]');\n\n            if(idNode){\n                idNode.remove();\n            }\n\n        },\n\n        showModalResult: function (title, status = '', text = '') {\n            if (status == 'success') {\n                icon = `<svg width=\"64\" height=\"64\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M32.0007 5.33325C46.7282 5.33325 58.6673 17.2723 58.6673 31.9999C58.6673 46.7275 46.7282 58.6666 32.0007 58.6666C17.2731 58.6666 5.33398 46.7275 5.33398 31.9999C5.33398 17.2723 17.2731 5.33325 32.0007 5.33325ZM32.0007 9.33325C19.4822 9.33325 9.33398 19.4815 9.33398 31.9999C9.33398 44.5184 19.4822 54.6666 32.0007 54.6666C44.5191 54.6666 54.6673 44.5184 54.6673 31.9999C54.6673 19.4815 44.5191 9.33325 32.0007 9.33325ZM28.6673 35.8382L40.5864 23.919C41.3675 23.138 42.6338 23.138 43.4149 23.919C44.1249 24.6291 44.1895 25.7402 43.6085 26.5232L43.4149 26.7475L30.0815 40.0808C29.3715 40.7908 28.2604 40.8554 27.4774 40.2744L27.2531 40.0808L20.5864 33.4141C19.8054 32.6331 19.8054 31.3668 20.5864 30.5857C21.2965 29.8757 22.4076 29.8111 23.1905 30.3921L23.4149 30.5857L28.6673 35.8382L40.5864 23.919L28.6673 35.8382Z\" fill=\"#18B131\"/>\n                    </svg>`;\n                btns = ``;\n            }\n            if (status == 'error') {\n                icon = `<svg width=\"73\" height=\"72\" viewBox=\"0 0 73 72\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                        <g clip-path=\"url(#clip0_6093_11246)\">\n                                        <path d=\"M36.5 72C56.3823 72 72.5 55.8823 72.5 36C72.5 16.1177 56.3823 0 36.5 0C16.6177 0 0.5 16.1177 0.5 36C0.5 55.8823 16.6177 72 36.5 72Z\" fill=\"#E31C1C\"/>\n                                        <g clip-path=\"url(#clip1_6093_11246)\">\n                                        <path d=\"M56 20L52 16L36 32L20 16L16 20L32 36L16 52L20 56L36 40L52 56L56 52L40 36L56 20Z\" fill=\"white\"/>\n                                        </g>\n                                        </g>\n                                        <defs>\n                                        <clipPath id=\"clip0_6093_11246\">\n                                        <rect width=\"72\" height=\"72\" fill=\"white\" transform=\"translate(0.5)\"/>\n                                        </clipPath>\n                                        <clipPath id=\"clip1_6093_11246\">\n                                        <rect width=\"40\" height=\"40\" fill=\"white\" transform=\"translate(16 16)\"/>\n                                        </clipPath>\n                                        </defs>\n                                    </svg>\n                `;\n\n                btns = ``;\n            }\n\n            if (status == 'selection') {\n                icon = `<svg width=\"64\" height=\"64\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M31.9997 17.3333C33.1042 17.3333 33.9997 18.2287 33.9997 19.3333V35.9999C33.9997 37.1045 33.1042 37.9999 31.9997 37.9999C30.8951 37.9999 29.9997 37.1045 29.9997 35.9999V19.3333C29.9997 18.2287 30.8951 17.3333 31.9997 17.3333ZM31.9997 46.6607C33.4724 46.6607 34.6663 45.4668 34.6663 43.9941C34.6663 42.5213 33.4724 41.3274 31.9997 41.3274C30.5269 41.3274 29.333 42.5213 29.333 43.9941C29.333 45.4668 30.5269 46.6607 31.9997 46.6607ZM31.9997 5.33325C46.7273 5.33325 58.6663 17.2723 58.6663 31.9999C58.6663 46.7275 46.7273 58.6666 31.9997 58.6666C27.6842 58.6666 23.5139 57.6388 19.7673 55.7013L9.56512 58.5475C7.792 59.0426 5.95322 58.0066 5.45809 56.2335C5.29425 55.6468 5.29433 55.0263 5.4582 54.4401L8.30531 44.2459C6.36332 40.4959 5.33301 36.3206 5.33301 31.9999C5.33301 17.2723 17.2721 5.33325 31.9997 5.33325ZM31.9997 9.33325C19.4812 9.33325 9.33301 19.4815 9.33301 31.9999C9.33301 35.9189 10.3271 39.6889 12.1944 43.0331L12.5961 43.7526L9.6289 54.377L20.2598 51.4112L20.9786 51.8119C24.3198 53.6749 28.0855 54.6666 31.9997 54.6666C44.5181 54.6666 54.6663 44.5184 54.6663 31.9999C54.6663 19.4815 44.5181 9.33325 31.9997 9.33325Z\" fill=\"#FF9935\"/>\n                </svg>\n                `;\n\n                btns = ` \n                    <button class=\"btn-reviews btn-lite-reviews w-40 \" value=\"Y\">${BX.message('complains_yes')}</button>\n                    <button class=\"btn-reviews btn-reviews--main w-40 \" value=\"N\">${BX.message('complains_no')}</button>\n                `;\n            }\n\n            const modalResult = BX.create('DIV', {\n                props: {\n                    className: 'review_modal modal_result show',\n                    id: 'modal_result'\n                },\n                html: `<div class=\"modal-content\">\n                        <div class=\"review_add__modal_header\">\n                           ${icon}\n                        </div>\n                        <div class=\"modal_result__content\">\n                            <h5>${title}</h5>\n                            <div>${text}</div>\n                        </div>\n                            <div class=\"review_add__modal_footer d-flex\">\n                                ${btns}\n                            </div>\n                        </div>`});\n\n            document.body.appendChild(modalResult);\n\n            window.addEventListener('click', (event) => {\n\n                if (event.target === modalResult) {\n                    this.closeModalResult();\n                }\n\n                if (event.target === modalResult.querySelector('button')) {\n                    if(modalResult.querySelector('button').value == ''){\n                        this.closeModalResult();\n                    }else{\n                        if(status == 'selection'){\n                            modalResult.querySelectorAll('button').forEach(item => {\n                                if(item == event.target){\n                                    if(event.target.value == 'Y'){\n                                        console.log(event)\n                                        SA_ReviewsList.elementComplaintController();\n                                    }\n                                }\n                            });\n                        }\n\n                    }\n                }\n\n                if(event.target.value == 'N'){\n                    this.closeModalResult();\n                }\n\n            })\n        },\n\n        closeModalResult: function () {\n            document.body.classList.remove('overflow-hidden');\n            document.getElementById('modal_result')?.remove();\n            BX.Sotbit.Reviews.hideOverlay();\n        }\n    }\n})();\n"]}