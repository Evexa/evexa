{"version":3,"file":"script.min.js","names":["SA_Reviews","init","param","this","signedParameters","reloadList","BX","Sotbit","Reviews","isBodyScrollFixed","showWait","ajax","runComponentAction","mode","data","then","response","closeWait","processed","processHTML","html","element","DOMParser","parseFromString","HTML","querySelector","document","innerHTML","classList","add","SA_ReviewsAdd","initModals","canRepeat","isTimeRepeat","showModalResult","message","processScripts","SCRIPT","ratingValue","ratingCountValue","parseInt","match","itemsRating","querySelectorAll","itemsReviewsCount","forEach","item","refreshFsLightbox","error","console","log"],"sources":["rvw.reviews/templates/.default/script.js"],"mappings":"AAAAA,WAAa,CACTC,KAAM,SAAUC,GACZC,KAAKC,iBAAmBF,EAAME,gBAClC,EAEAC,WAAY,SAAUH,GAClBI,GAAGC,OAAOC,QAAQC,mBAAoB,EACtCH,GAAGI,WAEWJ,GAAGK,KAAKC,mBAAmB,qBAAsB,gBAAiB,CAC5EC,KAAM,QACNT,iBAAkBD,KAAKC,iBACvBU,KAAMZ,IACPa,MACEC,IACGV,GAAGW,YACH,IAAIC,EAAYZ,GAAGa,YAAYH,EAASF,KAAKM,MAAM,GACnDC,SAAU,IAAIC,WAAYC,gBAAgBL,EAAUM,KAAM,aAEtDH,QAAQI,cAAc,sBAAwBC,SAASD,cAAc,qBACrEC,SAASD,cAAc,qBAAqBE,UAAYN,QAAQI,cAAc,qBAAqBE,UAEnGD,SAASD,cAAc,mCAAmCG,UAAUC,IAAI,0BAGxER,QAAQI,cAAc,8BAAgCC,SAASD,cAAc,6BAC7EC,SAASD,cAAc,6BAA6BE,UAAYN,QAAQI,cAAc,6BAA6BE,WAE/GD,SAASD,cAAc,+BACvBC,SAASD,cAAc,6BAA6BE,UAAYT,EAAUM,MAG1EE,SAASD,cAAc,gCACvBC,SAASD,cAAc,+BAA+BG,UAAUC,IAAI,2BAIxER,QAAQI,cAAc,yBACtBC,SAASD,cAAc,uBAAuBE,UAAYN,QAAQI,cAAc,uBAAuBE,WAG3GG,cAAcC,cACS,IAAnB5B,KAAK6B,WAAuB7B,KAAK8B,aACjC9B,KAAK+B,gBAAgB5B,GAAG6B,QAAQ,uBAAwB,UAGrC,IAAnBhC,KAAK6B,WAKT1B,GAAGK,KAAKyB,eAAelB,EAAUmB,QAEjCC,YAAcZ,SAASD,cAAc,0DAA0DE,UAC/FY,iBAAmBC,SAASd,SAASD,cAAc,kEAAkEE,UAAUc,MAAM,QACrIC,YAAchB,SAASiB,iBAAiB,kCACxCC,kBAAoBlB,SAASiB,iBAAiB,qCAC1CD,aACAA,YAAYG,SAAQC,IAChBA,EAAKnB,UAAYW,WAAW,IAGhCM,mBACAA,kBAAkBC,SAAQC,IACtBA,EAAKnB,UAAYY,gBAAgB,IAIzCQ,qBArBI5C,KAAK+B,gBAAgB5B,GAAG6B,QAAQ,kBAAmB,QAqBpC,IAEtBa,IACGC,QAAQC,IAAIF,GACZ1C,GAAGW,WAAW,GAI1B","ignoreList":[],"sourcesContent":["SA_Reviews = {\n    init: function (param){\n        this.signedParameters = param.signedParameters;\n    },\n\n    reloadList: function (param) {\n        BX.Sotbit.Reviews.isBodyScrollFixed = true;\n        BX.showWait();\n\n        let request = BX.ajax.runComponentAction('sotbit:rvw.reviews', 'contentLoader', {\n            mode: 'class',\n            signedParameters: this.signedParameters,\n            data: param,\n        }).then(\n            (response) => {\n                BX.closeWait();\n                let processed = BX.processHTML(response.data.html, false);\n                element = new DOMParser().parseFromString(processed.HTML, \"text/html\");\n\n                if (element.querySelector('.reviews__control') && document.querySelector('.reviews__control')) {\n                    document.querySelector('.reviews__control').innerHTML = element.querySelector('.reviews__control').innerHTML;\n                } else {\n                    document.querySelector('.control__item-filter--checkbox').classList.add('display-none-important');\n                }\n\n                if (element.querySelector('.reviews__content_wrapper') && document.querySelector('.reviews__content_wrapper')) {\n                    document.querySelector('.reviews__content_wrapper').innerHTML = element.querySelector('.reviews__content_wrapper').innerHTML;\n                } else {\n                    if (document.querySelector('.reviews__content_wrapper')) {\n                        document.querySelector('.reviews__content_wrapper').innerHTML = processed.HTML;\n                    }\n\n                    if (document.querySelector('.pagination-reviews-wrapper')) {\n                        document.querySelector('.pagination-reviews-wrapper').classList.add('display-none-important')\n                    }\n                }\n\n                if (element.querySelector('#reviews-statistics')) {\n                    document.querySelector('#reviews-statistics').innerHTML = element.querySelector('#reviews-statistics').innerHTML;\n                }\n\n                SA_ReviewsAdd.initModals();\n                if (this.canRepeat === false && this.isTimeRepeat) {\n                    this.showModalResult(BX.message('repeat_time_message'), 'error');\n                    return;\n                }\n                if (this.canRepeat === false) {\n                    this.showModalResult(BX.message('repeat_message'), 'error');\n                    return;\n                }\n\n                BX.ajax.processScripts(processed.SCRIPT);\n\n                ratingValue = document.querySelector('#reviews-statistics .statistic__info-estimation__title').innerHTML;\n                ratingCountValue = parseInt(document.querySelector('#reviews-statistics .statistic__info-estimation span.gray-text').innerHTML.match(/\\d+/));\n                itemsRating = document.querySelectorAll('[data-marker=\"product_rating\"]');\n                itemsReviewsCount = document.querySelectorAll('[data-marker=\"product_rvw_count\"]');\n                if (itemsRating) {\n                    itemsRating.forEach(item => {\n                        item.innerHTML = ratingValue;\n                    })\n                }\n                if (itemsReviewsCount) {\n                    itemsReviewsCount.forEach(item => {\n                        item.innerHTML = ratingCountValue;\n                    })\n                }\n\n                refreshFsLightbox();\n            },\n            (error) => {\n                console.log(error)\n                BX.closeWait();\n                //this.showModalResult(error.errors.map(item => item.message).join('\\n'), 'error')\n            }\n        );\n    }\n}"]}