{"version":3,"file":"script.min.js","names":["SA_ReviewsFilter","init","params","this","eventHandlerFilter","eventHandlerSelect","eventHandlerSelectDocument","initExample","example","Choices","document","getElementById","searchEnabled","itemSelectText","passedElement","element","addEventListener","event","btn","target","closest","classList","contains","BX","show","querySelector","add","checkbox","checked","setAttribute","value","form","prepareForm","SA_Reviews","reloadList","hide","remove","buttonItemsFilter","querySelectorAll","buttonItem","e","itemTransfer","setAttr","prmName","val","url","URL","window","location","searchParams","set","history","pushState","removeAttribute","elem","FormData","pair","get","append","getParam","entries","param"],"sources":["rvw.reviews.filter/templates/.default/script.js"],"mappings":"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","ignoreList":[],"sourcesContent":["SA_ReviewsFilter = {\n    init: function (params) {\n        this.eventHandlerFilter();\n        this.eventHandlerSelect();\n        this.eventHandlerSelectDocument();\n        this.initExample();\n    },\n\n    initExample: function () {\n        this.example = new Choices(document.getElementById('star'), {\n            searchEnabled: false,\n            itemSelectText: ''\n        });\n\n        this.example.passedElement.element.addEventListener(\n            'change',\n             (event) => {\n                const btn = event.target.closest('.btn-filter');\n\n                if (btn.classList.contains('select') && (btn.classList.contains('select-active') === false)) {\n                    BX.show(document.querySelector('.choices'));\n                    btn.classList.add('select-active');\n\n                    const checkbox = btn.querySelector('input[type=\"checkbox\"]');\n                    if (checkbox && (event.target != checkbox)) {\n                        if (checkbox.checked) {\n                            checkbox.checked = false;\n                            checkbox.setAttribute('checked', '')\n                        } else {\n                            checkbox.setAttribute('checked', true);\n                            checkbox.checked = true;\n                            checkbox.value = 'false';\n                        }\n                    }\n                    if (event.target.closest('.control-items')) {\n                        let form = this.prepareForm(event.target.closest('.control-items'));\n\n                        SA_Reviews.reloadList(form);\n                    }\n                } else {\n                    BX.hide(document.querySelector('.choices'));\n                    btn.classList.remove('select-active');\n                    let form = this.prepareForm(btn.closest('.control-items'));\n                    SA_Reviews.reloadList(form);\n                }\n            },\n            false,\n        );\n    },\n\n    eventHandlerFilter: function () {\n        const buttonItemsFilter = document.querySelectorAll('.reviews__control .btn-filter');\n\n        for (let buttonItem of buttonItemsFilter) {\n            buttonItem.addEventListener('click', (e) => {\n                const btn = e.target.closest('.btn-filter');\n                const itemTransfer = btn.querySelector('.need-transfer');\n\n\n                if (itemTransfer) {\n                    if (itemTransfer.classList.contains('transfer')) {\n                        itemTransfer.classList.remove('transfer');\n                        btn.querySelector('[name=\"DATE_CREATION\"]').value = 'desc';\n                    } else {\n                        itemTransfer.classList.add('transfer');\n                        btn.querySelector('[name=\"DATE_CREATION\"]').value = 'asc';\n                    }\n\n                    let form = this.prepareForm(e.target.closest('.control-items'));\n                    SA_Reviews.reloadList(form);\n                }\n            });\n        }\n    },\n\n    setAttr: function (prmName, val) {\n        const url = new URL(window.location);  // == window.location.href\n        url.searchParams.set(prmName, val);\n        history.pushState(null, null, url);\n    },\n\n    eventHandlerSelect: function () {\n        const buttonItemsFilter = document.querySelectorAll('.btn-filter');\n\n        for (let buttonItem of buttonItemsFilter) {\n            buttonItem.addEventListener('click', (e) => {\n                const btn = e.target.closest('.btn-filter');\n\n                if (btn.classList.contains('select') && (btn.classList.contains('select-active') === false)) {\n                    BX.show(document.querySelector('.choices'));\n                    btn.classList.add('select-active');\n                } else {\n                    BX.hide(document.querySelector('.choices'));\n                    btn.classList.remove('select-active');\n                }\n                if (btn.querySelector('input[type=\"checkbox\"]')) {\n                    if (btn.querySelector('input[type=\"checkbox\"]').checked) {\n                        if(btn.querySelector('input[name=\"FILES\"]')){\n                            btn.querySelector('input[name=\"FILES\"]').removeAttribute('checked');\n                        }\n                    } else {\n                        if(btn.querySelector('input[name=\"FILES\"]')){\n                            btn.querySelector('input[name=\"FILES\"]').setAttribute('checked', 'true');\n                        }\n                    }\n\n                    let form = this.prepareForm(e.target.closest('.control-items'));\n                    SA_Reviews.reloadList(form);\n                }\n            });\n        }\n    },\n\n    prepareForm: function (elem) {\n        let form = new FormData(elem)\n\n        if (!form.get('FILES')) {\n            form.append('FILES', 'off')\n        }\n        if (!form.get('more') && this.getParam('more')) {\n            form.append('more', this.getParam('more'))\n        }\n\n        for (var pair of form.entries()) {\n            this.setAttr(pair[0], pair[1])\n        }\n        return form;\n    },\n\n    getParam: function (param){\n        let params = (new URL(document.location)).searchParams;\n        return params.get(param);\n    },\n\n    eventHandlerSelectDocument: function () {\n        document.addEventListener('click', (e) => {\n            const btn = document.querySelector('.btn-filter.select-active');\n            if (btn) {\n                if (!(e.target.closest('.btn-filter.select-active'))) {\n                    btn.classList.remove('select-active');\n                    BX.hide(document.querySelector('.choices'));\n                }\n            }\n        });\n    },\n};\n"]}